# Exercise - manual relay control

## Instructions

Serverless code can be triggered by many different things, including HTTP requests. You can use HTTP triggers to add a manual override to your relay control, allowing someone to turn the relay on or off from a web request.

For this assignment, you need to add two HTTP triggers to your Functions App to turn the relay on and off, reusing what you have learned from this lesson to send commands to the device.

Some hints:

* You can add an HTTP trigger to your existing Functions App(``function_app.py``) with the following command:

    ```sh
    @app.function_name(name="HttpTrigger1")
    @app.route( auth_level=func.AuthLevel.ANONYMOUS)
    def test_function(req: func.HttpRequest):
        logging.info('Python HTTP trigger function processed a request.')
        return func.HttpResponse(
            "This HTTP triggered function executed successfully.",
            status_code=200
            )
    ```

    Replace the name with the name for your HTTP trigger. Use something like `relay_on` and `relay_off`

* Find out more details about how to do it here: 

    https://learn.microsoft.com/en-us/azure/azure-functions/functions-bindings-http-webhook-trigger?tabs=python-v2%2Cisolated-process%2Cnodejs-v4%2Cfunctionsv2&pivots=programming-language-python
    
    
* HTTP triggers by default support GET and POST requests. This means you can call them using your web browser - web browsers make GET requests.

    When you run your Functions App locally, you will see the URL of the trigger:

    ```output
    Functions:

        relay_off: [GET,POST] http://localhost:7071/api/relay_off

        relay_on: [GET,POST] http://localhost:7071/api/relay_on

        iot-hub-trigger: eventHubTrigger
    ```

    Paste the URL into your browser and hit `return`, or `Ctrl+click` (`Cmd+click` on macOS) the link in the terminal window in VS Code to open it in your default browser. This will run the trigger.

    > ğŸ’ Notice that the URL has `/api` in it - HTTP triggers are by default in the `api` subdomain.

* When you deploy the Functions App, the HTTP trigger URL will be:

    `https://<functions app name>.azurewebsites.net/api/<trigger name>`

    Where `<functions app name>` is the name of your Functions App, and `<trigger name>` is the name of your trigger.

## 
