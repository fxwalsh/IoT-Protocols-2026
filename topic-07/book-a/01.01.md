# Firebase

If you already have a Google Account then all you have to do is go to https://firebase.google.com/ sign in with your Google credentials:

![Firebase](./img/fb.png)

In this exercise we will be using two Firebase services: Realtime Database and Storage

## Create a Firebase Project

+  Open the Firebase console and create a new project called *SensePi*. 
+  Click *Continue* and disable *Google Analytics*
  
  ![](./img/ana.png)

After your project is ready, you can create a Realtime Database. 

## Setting up Realtime Database

With Firebase Realtime Database, clients connect to the database and have a bidirectional connection using HTTP websockets. Then if any client pushes data to the database it will inform all connected clients that it has been changed by sending them the newly saved data.

This is similar to a MQTT broker and how it reacts when it receives a message from a publisher and sends it to all subscribers. The difference, unlike MQTT, is that the data is stored in the database also.

Set up the Realtime Database as follows:

+  In your *SensePi* Project, select *Realtime Database* and then *Create Database*

<img src="./img/rt.PNG" alt="image-20221123064144321" style="zoom:50%;" />

+  Select "europe-west1" for the location.
+  For Security Rules, Select the *Start in Test Mode* option and click *Enable*.

<img src="./img/sec.PNG" alt="image-20221123064517037" style="zoom:50%;" />

+ You should now see the *Data* of the Database, which is empty.

  ![Security](./img/db.png)

## Storage Service

Using Firebase Storage, you will be able to upload files and access those files through references (URLs) from your applications. In this case, you will upload image take from the Pi Camera and make them accessible from a Glitch Web App. 

+ In the Firebase Console, click on the *Build->Storage* option and then *Get Started*

  ![image-20221123064845877](./img/st.PNG)
  
+ Select "Start in Test Mode" and click *Next*.

+ <img src="./img/image-20221123065336675.png" alt="image-20221123065336675" style="zoom:50%;" />

+ Set the cloud storage location to *europe-west* and click *Done*.
  ![image-20221123065419154](./img/eu.PNG)
  
  

You have now set up the Realtime DB for tracking image events and the Storage service for storing your images. The next step is to use the Firebase Python SDK to write a program on the Rpi to create image "Events" in the DB and upload images taken bey the camera to Storage.
