# Web App

You will now  create a basic web app that displays Event data and updates dynamically when new data is uploaded to firebase (i.e. without refreshing the page). We can do this by creating a connection to the Realtime DB.



+ Create a file called  index.html and insert the following:

```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>YourArduinoAtHome</title>


  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-app.js"></script>
  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-database.js"></script>
  <!-- import the webpage's javascript file -->
  <script src="./script.js"></script>
</head>

<body>
  <h1>Arduino Button Events</h1>

  <p id="events">

  </p>

</body>

</html>
```
Notice that the html ``<body>`` is very simple. The main thing here is the import of the Firebase Javascript libraries. These imports were just copied/pasted from Firebase app in the console. We will use these libraries in the script to connect to Firebase from the Web App. 

+ Create a file called ``script.js`` in the same folder with the following:
```javascript
// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyBeIT-WpdNR6_VirxNYQQqhburQogeAvRI",
  authDomain: "sensepi-ed7ce.firebaseapp.com",
  databaseURL: "https://sensepi-ed7ce-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "sensepi-ed7ce",
  storageBucket: "sensepi-ed7ce.appspot.com",
  messagingSenderId: "1020743726209",
  appId: "1:1020743726209:web:99bd68dd048c4f38100980"
};

firebase.initializeApp(firebaseConfig);

// Get a reference to the database service
const database = firebase.database();

// Create database reference
const camRef = database.ref("events/button");

// Sync on any updates to the DB. THIS CODE RUNS EVERY TIME AN UPDATE OCCURS ON THE DB.
camRef.limitToLast(1).on("value", function(snapshot) {
  snapshot.forEach(function(childSnapshot) {
    const event = childSnapshot.val()["event"];
    const temp = childSnapshot.val()["temperature"];
    const count = childSnapshot.val()["count"];
    document.getElementById("events").innerText += `Event: ${event}, Temp: ${temp}, Count: ${count} \n`
      })
  });


```
You now need to replace the `firebaseConfig` constant in script.js with your own one from your Firebase app 
+ Go to your Firebase Console and in your  project, click on the *ArduinoButtonApp* and click on settings icon:
  <img src="./img/set2.PNG" alt="image-20221123094922841" style="zoom:50%;" />
+ scroll down to the Firebase SDK snippet section and replace the ``firebaseConfig`` variable in you  *script.js* file with this one. 
  ![](./img/gli.png)

+ Finally, preview your Glitch app in a browser, then click on the button on the RPi. You should see the last picture taken by the RPi displayed in your Glitch app. Click on the button and you should see the image update dynamically in the browser(i.e you don't have to refresh the page). 
  !![image-20231207154749383](./img/image-20231207154749383.png)