# Accessing the RPi using Secure Shell(SSH)

In order to access the RPi using SSH you should have the previous steps completed:

- Enabled SSH in the initial configuration of the SD card
- You know the IP address of your Raspberry Pi.  

## SSH Client
SSH is built into Linux, Mac OSX and Windows10. 
This and future labs will use the CompSys VM to SSH into the RPi. For this to work, **you must have a bridging network adapter configured on the CompSys2021 VM - see week 5 lab 1**. However, the process is the same for Linux, Mac OSX and Windows10, If you wish to SSH in from older Windows version, see the final section in this step: 

### SSH Connection

To connect to your Pi from Linux or MAC OSX, enter the following command into a terminal and replace \<IP> with the IP address of the RPi and \<username> with the user name you configured the OS with in a previous step.

~~~bash
ssh <username>@<IP>
~~~

If you receive a connection timed out error it is likely that you have entered the wrong IP address for the Raspberry Pi.

When the connection works you will see a security/authenticity warning. Type  ***yes*** to continue. You will only see this warning the first time you connect.

>  **Note:** You may be given a warning and asked to clear the record from your list of known devices. Accept this instruction and trying the ssh command again should be successful.

Next you will be prompted for the password you entered in the previous step (I told you to remember it!)

The following image shows what a successful connection looks like(the ip address you use will be different):

![SSH connection from Linux(CompSys VM)](./img/ssh.png)

You should now have the Raspberry Pi prompt:

~~~bash
username@HDipRPi:~ $
~~~

You have now started a Secure Shell session on the Rpi, and can remotely execute commands on the RPi .

## Connection Problems

A connection might be unsuccessful for various reasons. If you get a network connection error or connection time out, always check the *physical* first - is it turned on and is the red led on!? If you're wireless, check that you have the correct IP address for the RPi by pinging it. If the ping replies successfully then it may be the case that you have not enabled/disabled SSH on the RPi. Power down the RPi and repeat the **Enable SSH section** in the Raspberry Pi OS Configuration page of this lab. 

 Also, remember that the the IP address of the RPi can change if it uses Dynamic Host Configuration Protocol(DHCP). It'll usually keep the same IP for some time however you may need to find and update the IP address if this happens.

For Windows you will need to get a suitable 3rd party client. Please follow the instructions for your particular OS:

## SSH from Windows <10 
A popular SSH client for windows is called PuTTY.  Download and install the relevant windows installer from  [here](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html). 

Run PuTTY and type the IP address of your RPi into the Host Name field and click the Open button.  
![PuTTY](./img/putty1.png)  

When the connection works you will see the security warning shown below. Click the 'Yes' button. You will only see this warning the first time PuTTY connects to a RPi.  
![PuTTY](./img/putty2.png) 

You will now see the login prompt. The default login for Raspberry Pi OS is ``pi`` with the password ``raspberry``.

You should now have the Raspberry Pi prompt:

~~~bash
frank@HDipRPi:~ $
~~~

You are now connected to the Pi remotely, and can execute commands.

### Ongoing use of Putty

Next time you use PuTTY, look for the **Saved Sessions** section in the bottom half of the configuration screen. If you use this, it is recommended to switch to the  **Connection** page in the left hand tree, and setting the  **Seconds** between keepalives value to **30**. Then switch back to the  Session page in the tree before you click Save. Using this setting allows you to leave a PuTTY window open for long periods of time with no activity, without the Pi timing out and disconnecting you.



