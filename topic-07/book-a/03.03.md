# Integrate Circuit

You will need the *Bell* circuit that included the button and RPi camera from last lab to complete this step. If not, you could copy some image files into the "images" folder and run the program manually as in the last section. 

+ On the Raspberry pi in the same folder as the step(~/week10), create a new folder called *images*
+ In *week10* folder, create a new file called *bell.py* with the following contents:

```python
from gpiozero import Button
from picamera import PiCamera
import datetime
import storeFileFB

button = Button(22)
camera = PiCamera()

camera.start_preview()
frame = 1

while True:
    button.wait_for_press() # wait until button is pressed
    
    fileLoc = f'/home/pi/week10/images/frame{frame}.jpg' # set location of image file and current time
    currentTime = datetime.datetime.now().strftime("%d/%m/%Y %H:%M:%S")

    camera.capture(fileLoc) # capture image and store in fileLoc
    print(f'frame {frame} taken at {currentTime}') # print frame number to console
    storeFileFB.store_file(fileLoc)
    storeFileFB.push_db(fileLoc, currentTime)
    print('Image stored and location pushed to db')
    frame += 1
```

+ Run the program using ``python bell.py``. 
+ Press the button and then check the Firebase Store and the DB. You should see the image taken by the RPi and the corresponding entry in the DB.  
  ![](./img/file.png)

Now for the final part, you will build a Web App that can view the file. For this we can use Glitch.

