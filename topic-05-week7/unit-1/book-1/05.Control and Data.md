# Get data from the RPi to your phone 

We'll now send data from the RPi  to the Blynk Mobile app. You will need to update the Template we are using for the device. 

### Connect the temperature sensor

You will need to connect the Grove temperature sensor to the Raspberry Pi to the digital socket marked **D16** on the Grove hat. Follow instructions as in [this lab](https://tutors.dev/lab/iot-standards-protocols-2025/topic-02/book-1/Measure%20Temperature) **but use D16** instead of D5



![A grove temperature sensor](./img/grove-dht11.png)

### Update Phone App

+ On your phone, open the Blynk app and select the  SensePi device. Click on the wrench in the top-right corner to edit the Mobile Dashboard.
+ Open the *Widget Box*, scroll down to the displays section and  and add a *Value Display* 
  <img src="./img/val.png" style="zoom:50%;" />
+ Click on the Value Display widget and configure it to display temperature and  by attaching it to the  Temperature DataStream as shown:
  <img src="./img/image-20221108132811372.png" alt="image-20221108132811372" style="zoom:50%;" />
+ In the Design tab, set the title to Temperature.

<img src="./img/image-20221108133044575.png" alt="image-20221108133044575" style="zoom:50%;" />

+ Exit back out to the App as before using the back button in top left corner.

### Update Blynk Python program on RPi 

+ If you have not completed [this lab](https://tutors.dev/lab/iot-standards-protocols-2025/topic-02/book-1/Measure%20Temperature) then install the following:
  ~~~python
  pip install seeed-python-dht
  ~~~
  
  
  
+ Now, on the Raspberry Pi, in ``blynk.py``, add the following code is shown below just after the last "import" statement:

  ~~~python
  import time
  from seeed_dht import DHT
  sensor = DHT("11", 16)
  ~~~

  

+ Now, on the Raspberry Pi, in ``blynk.py``, replace the ``while true`` loop with the following:

```python
last_temp_time = 0  # Track the last time temperature was sent
while True:
    blynk.run()  # Process Blynk events
    current_time = time.time()

    if current_time - last_temp_time >= 10://send temp message every 10 seconds
        _, temp = sensor.read()
        blynk.virtual_write(0, temp)
        last_temp_time = current_time

    time.sleep(2)  # Run every 2 second
```

This will send temperature data every 10 seconds and will respond to any switch changes within 2 seconds. Go through the code and make sure you understand the logic. This reduces the amount of messages used in Blynk free account. 

+ Now run the blynk python app on the RPi as before.

  ### Temperature on Phone

  Now open the the Blynk app on your phone again, you should now see live temperature data. 
  ![Blynk - Button](./img/blynk4.png)

+ Select the ``Button`` and it control the relay on your RPi

ðŸ˜€ You now have an app on your phone that displays  temperature data from your device and allow you to control a Relay!

---



## ðŸš€ Challenge:

Referencing the previous steps, try some of the following steps:

+ Display Temperature using a **Gauge** and **SuperChart** widgets. 
+ Display Pressure/Humidity data on the Blynk App
  ![](./img/graph.png)

**NOTE: Remember to stop the RPI program when you're done so that you so not use up unnecessary messages (you get 30000 on a free account!)**
