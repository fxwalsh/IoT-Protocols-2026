# Weather API Re

## Before We Start...

...lets make sure the RPi is up to date. In the RPi SSH session, run the following commands:

```shell
sudo apt-get update
sudo apt-get upgrade
```

This will download package information and install available upgrades of all packages currently installed on the system.



## Configure the RPi

- Power up the RPi. 

- Start a SSH session on you Raspberry Pi. You can probably use the host name you configured in the last step now instead of the IP address.

### Install requests library

- Python libraries, such as `requests`, are installed using `pip`. ``pip` is the package installer for Python. Use the following command to install requests

```bash
pip install requests
```



## Create your 1st Python RPi Program

- Create a new directory called ``week6-lab2`` and change directory to it:

~~~bash
mkdir week2-api
cd week2-api
~~~

- Using nano, or otherwise, create a new python script called ``local-weather	.py`` and add the following code:

```python
import requests

def get_weather(api_key, city):
    url = f"http://api.openweathermap.org/data/2.5/weather?q={city}&appid={api_key}&units=metric"
    response = requests.get(url)
    if response.status_code == 200:
        data = response.json()
        weather = data['weather'][0]['description']
        temperature = data['main']['temp']
        return f"Weather in {city}: {weather}, Temperature: {temperature}°C"
    else:
        return "Error: Unable to fetch weather data."

def main():
    api_key = 'YOUR_API_KEY'  # Replace with your OpenWeatherMap API key
    city = "Tramore"
    print(get_weather(api_key, city))

if __name__ == "__main__":
    main()

```

- Now run the the program by typing ``python temp-sensor.py`` at the command line. You should see output similar to the following:

~~~bash
Weather in Tramore: overcast clouds, Temperature: 11.66°C
~~~

Look at the code and try to understand the logic using what you learned in Programming. Some things of note with Python

1. You use indent group statements in a program or script. For example, notice the  block of code contained in the ``while`` statement is indented.
2. You don't have to compile it before you run it - it's an 'interpreted' language.
3. Python is dynamically typed; you don't have to declare what type each variable is.  

# Exercises 

- Change the location in the above code.
- Use the documentation to display pressure and humidity
- Use the documentation to display wind direction and speed.