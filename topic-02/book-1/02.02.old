# Raspberry Pi OS Configuration
To use the Pi in headless mode, you will need to make some changes on the the SD card before we put it into the Pi and boot up. 

## Editing the SD card contents
The SD card is just like any other drive on your computer. You should be able to locate it using the default file explorer on your computer or navigate to it using a command line terminal. You will see at least one partition, possibly two depending on what OS is on your computer. What we are after at the moment is the **boot** partition which should be visible on all operating systems. It should be labeled as such in your file explorer if you are using a Mac or Linux machine. If you're using Windows, it'll be the only accessible part of the SD card. 

## Enable SSH access
- Place an empty file named ``ssh``, without any extension, onto the boot partition of the SD card. If you're using Windows, inside the boot directory, right-click in the white space, scroll to ``New`` and select ``Text`` Document. Enter ``ssh`` as the name.  
**NOTE: You may see two partitions. The first one, which is the smaller one, is the boot partition. Place the file into this one.**

## Configure Wifi connection

### On Mac/Linux
- Create a new file in the ``boot`` drive called ``wpa_supplicant.conf``.
Follow code step below.

### On Windows
- Download and install Notepad++ from [here](https://notepad-plus-plus.org/download).
- Once installed, inside Notepad++ go to ``File > New`` to create a new file.
- In the top bar, select ``Edit > EOL Conversion``. Make sure ``Unix (LF)`` is selected. It should appear disabled if it is.
- Select ``File > Save as``, navigate to your ``boot`` drive and call the file ``wpa_supplicant.conf``.
Open the ``rootfs`` partition of the SD card on your computer
You will nedd full administrator/root access to complete the followong.  On the SD card, open  /etc/network/interfaces in a suitable text editor and change the first line (or add it if it's not there) to:

~~~bash
auto wlan0
~~~

Then, at the bottom of the file, add these lines telling the Raspberry Pi to allow wlan as a network connection method and use the /etc/wpa_supplicant/wpa_supplicant.conf as your configuration file.
~~~bash
allow-hotplug wlan0
iface wlan0 inet dhcp
wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
iface default inet dhcp
~~~

On the SD card, open up ``/etc/wpa_supplicant/wpa_supplicant.conf`` in the editor. Some lines might already be present, just add the following to the end of the file.
~~~bash
network={
ssid="YOUR_NETWORK_NAME"
psk="YOUR_NETWORK_PASSWORD"
proto=RSN
key_mgmt=WPA-PSK
pairwise=CCMP
auth_alg=OPEN
}
~~~
The other parameters are specific to your wifi network at home but what's there is typical for most domestic WiFi or else find out by examining how your computer connects to the WiFi. 
- proto could be either RSN (WPA2) or WPA (WPA1)
- key_mgmt could be either WPA-PSK (most probably) or WPA-EAP (enterprise networks)
- pairwise could be either CCMP (WPA2) or TKIP (WPA1)
- auth_alg is most probably OPEN, other options are LEAP and SHARED

## Boot the Pi
Eject the SD card and put it into the unplugged RPi. Now power up the RPi - it should automatically connect to the the WiFi network. But how do you know if it's connected? You'll have to find it on the local network...

## Exercise
Before moving on, try to come up with your own solution to finding and connecting to the RPi. If everything has worked out so far you now know the following: 
+ default host name is "raspberryri"
+ the RPi should have acquired an IP address on the same local network as your computer (assuming your computer uses the same router/access point)
+ It's configured for SSH
+ All RPis have the same manufacturers MAC address section, so the MAC will start with "``b8:27:eb:...``"  

There is more than one solution to this problem. See if you can come up with more than one before moving on...

