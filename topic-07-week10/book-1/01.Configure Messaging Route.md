### ðŸš¦ 2. Route IoT Hub Telemetry to the Blob

### Step A: Get Storage Connection String

1. In your **Storage Account**, go to **Security + Networking -> Access Keys**
2. Copy the **Connection String** for key 1.

### Step B: Add Storage Endpoint in IoT Hub

1. Open your **IoT Hub**
2. Go to **Message Routing > Custom Endpoints**
3. Click **+ Add**
4. Choose **Storage** as Endpoint type
5. Enter:
   - Name: `env-data-bloboutput`
   - Connection string: *paste from above*
   - Click Pick a Container and select the container you created in the last step
   - Encoding: **JSON**

<img src="./image-20250330224439788.png" alt="image-20250330224439788" style="zoom:25%;" />

6. Click **Next** to configure the Route
7. Enter:
   1. Name: **env-data-route**
   2. Source: **Device Telemetry Messages**

### Step C: Add a Route

1. Go to **Message Routing > Routes**
2. Click **+ Add**
3. Name: `sendToBlob`
4. Source: **Device Telemetry Messages**
5. Endpoint: **bloboutput**
6. Query: `true` (default)
7. Save
   <img src="./image-20250330225707279.png" alt="image-20250330225707279" style="zoom:33%;" />